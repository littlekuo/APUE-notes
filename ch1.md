# UNIX 基础知识

## 体系结构
1.操作系统可视作为一种软件，它控制计算机硬件资源，提供程序运行环境，这种软件称之为内核。  
2.UNIX内核的接口称为系统调用。公用函数库构建在系统调用接口之上。应用程序既可以使用公用函数库，也可以使用系统调用。

## 文件与目录  
1.路径名：由斜线分隔的一个或者多个文件名组成的序列  
  * 以斜线开头的路径名称为绝对路径名
  * 否则称作相对路径名

  
2.每个进程都有一个工作目录，称作当前工作目录。所有的相对路径名都是从工作目录开始解释。
  * 可用chdir函数更改工作目录

## 输入输出
1.文件描述符：通常是一个小的非负整数，内核用以标识某个特定进程正在访问的文件。内核打开或者创建一个文件时，返回的都是文件描述符。  
2.每当运行一个新程序时，所有shell都为其打开3个文件描述符：标准输入，标准输出和标准错误。
3.不带缓冲的IO：例如open，read，write，lseek以及close等。

## 标准IO
1.标准IO函数为那些不带缓冲的I/O函数提供了一个带缓冲的接口。

## 进程
1.程序是存储在磁盘上的可执行文件，程序的运行实例称作进程。UNIX系统确保每个进程都有一个唯一的数字标识符，称作进程ID（总是一个非负整数）。  
2.有3个用于进程控制的主要函数：fork，exec和waitpid。
3.通常一个进程内只有一个线程，但是也可以创建多个线程。
  * 同一进程内的多个线程共享同一地址空间，文件描述符，栈以及其他进程相关属性。
  * 因为多线程能访问同一存储空间，所以各线程访问共享数据时需要采取措施来避免不一致性。
  * 线程也用ID标识，但是线程ID只有在它所属的进程内有意义。

## 出错处理
1.当 UNIX 系统函数出错时，通常会返回一个负值，同时整型变量 errno 通常被设置为具有特定信息的值。
  * 文件 <errno.h> 定义了 errno 以及赋予它的各种常量，这些常量以 E字符开头
  * 在多线程环境中，每个线程都有属于自己的局部 errno，以避免一个线程干扰另一个线程。

2.注意：
  * 如果没有出错，则errno的值不会被清除。因此只有在函数的返回值指明出错了时，检查errno才有意义
  * 任何函数都不会将errno的值清零，且在<errno.h>中定义的所有常量都不为0。

  
3.C标准定义了strerror/perror函数：用于处理错误信息
``` c++
#include<string.h>
char *strerror(int errnum);
#include<stdio.h>
void perror(const char* msg);
```
strerror: 将 errnum（通常就是 errno值）映射为一个出错消息字符串，并且返回此字符串的指针。  
perror: 基于 errno的当前值，在标准错误上产生一条出错消息，然后返回。这条出错消息先是 msg指向的字符串，后面是冒号，再是一个空格，后面是对应于errno值的出错消息，最后是一个换行符。

## 用户标识







    
